# ğŸš€ Rust Backend

[![Ask DeepWiki](https://deepwiki.com/badge.svg)](https://deepwiki.com/asiazhang/rust-backend)

åŸºäº Rust çš„ç°ä»£åŒ–åç«¯æœåŠ¡æ¡†æ¶ï¼Œä¸“ä¸ºä¸­å°è§„æ¨¡åº”ç”¨è®¾è®¡ã€‚é‡‡ç”¨å•ä½“æ¶æ„ï¼Œé›†æˆ Web APIã€æ¶ˆæ¯é˜Ÿåˆ—å¤„ç†å’Œå®šæ—¶ä»»åŠ¡åŠŸèƒ½ã€‚

## âœ¨ æ ¸å¿ƒç‰¹æ€§

- ğŸŒ **Web API æœåŠ¡** - åŸºäº Axum æ¡†æ¶ï¼Œæ”¯æŒ OpenAPI æ–‡æ¡£
- âš¡ **æ¶ˆæ¯é˜Ÿåˆ—** - Redis Streams å¼‚æ­¥æ¶ˆæ¯å¤„ç†
- â° **å®šæ—¶ä»»åŠ¡** - åŸºäº tokio-cron-scheduler çš„ä»»åŠ¡è°ƒåº¦
- ğŸ—„ï¸ **æ•°æ®åº“** - PostgreSQL + sqlx æ—  ORM æ•°æ®è®¿é—®
- ğŸ›¡ï¸ **ä¼˜é›…å…³é—­** - å®Œæ•´çš„ä¿¡å·å¤„ç†å’Œèµ„æºæ¸…ç†
- ğŸ’¾ **æ€§èƒ½ä¼˜åŒ–** - mimalloc å…¨å±€å†…å­˜åˆ†é…å™¨
- ğŸ”’ **åˆ†å¸ƒå¼é”** - Redis åˆ†å¸ƒå¼é”æ”¯æŒ

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚

- **Rust**: 1.70+ (æ¨èä½¿ç”¨æœ€æ–°ç¨³å®šç‰ˆ)
- **PostgreSQL**: 13+
- **Redis**: 6+
- **Docker**: ç”¨äºæœ¬åœ°å¼€å‘ç¯å¢ƒ

### å¼€å‘ç¯å¢ƒæ­å»º

1. **å…‹éš†é¡¹ç›®**
   ```bash
   git clone <repository-url>
   cd rust-backend
   ```

2. **å¯åŠ¨ä¾èµ–æœåŠ¡**
   ```bash
   cd db_helper && docker compose up -d
   cd ..
   ```

3. **å®‰è£…æ•°æ®åº“å·¥å…·**
   ```bash
   cargo install sqlx-cli
   ```

4. **åˆå§‹åŒ–æ•°æ®åº“**
   ```bash
   sqlx database create
   sqlx migrate run
   ```

5. **é…ç½®ç¯å¢ƒå˜é‡**
   ```bash
   cp .env.example .env  # å¦‚æœæœ‰æ¨¡æ¿æ–‡ä»¶
   # ç¼–è¾‘ .env æ–‡ä»¶é…ç½®æ•°æ®åº“å’ŒRedisè¿æ¥
   ```

6. **å¯åŠ¨é¡¹ç›®**
   ```bash
   cargo run
   ```

### éªŒè¯å®‰è£…

- ğŸŒ **Web API**: http://localhost:8080
- ğŸ“– **APIæ–‡æ¡£**: http://localhost:8080/swagger-ui/
- ğŸ—„ï¸ **æ•°æ®åº“**: localhost:5432
- ğŸ“¨ **Redis**: localhost:6379

## ğŸ—ï¸ æ¶æ„è®¾è®¡

### æ•´ä½“æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Rust Backend (å•ä½“åº”ç”¨)                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  Web API    â”‚  â”‚  Job Consumerâ”‚  â”‚   Cron Tasks    â”‚   â”‚
â”‚  â”‚   Service   â”‚  â”‚    Service   â”‚  â”‚     Service      â”‚   â”‚
â”‚  â”‚  (Axum)     â”‚  â”‚   (Redis)    â”‚  â”‚  (Scheduler)     â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚         â”‚                 â”‚                    â”‚            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚                 Shared Library                   â”‚    â”‚
â”‚  â”‚  â€¢ Config â€¢ Models â€¢ Traits â€¢ Utils              â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                    â”‚                                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚                Database Layer                     â”‚    â”‚
â”‚  â”‚  â€¢ Connection â€¢ Repositories â€¢ Models           â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚             â”‚             â”‚
        â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”
        â”‚PostgreSQL â”‚ â”‚   Redis   â”‚ â”‚  Redis    â”‚
        â”‚  Database â”‚ â”‚  Streams  â”‚ â”‚   Lock    â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æŠ€æœ¯æ ˆè¯¦è§£

#### æ ¸å¿ƒæ¡†æ¶
- **[axum](https://github.com/tokio-rs/axum)** - ç°ä»£ã€å¿«é€Ÿçš„ Web æ¡†æ¶ï¼ŒåŸºäº Tokio
- **[tokio](https://github.com/tokio-rs/tokio)** - å¼‚æ­¥è¿è¡Œæ—¶ï¼Œæä¾›é«˜æ€§èƒ½ I/O
- **[sqlx](https://github.com/launchbadge/sqlx)** - ç¼–è¯‘æ—¶ SQL æ£€æŸ¥çš„å¼‚æ­¥æ•°æ®åº“åº“
- **[redis](https://github.com/redis-rs/redis-rs)** - Redis å®¢æˆ·ç«¯ï¼Œæ”¯æŒè¿æ¥æ± 

#### API & æ–‡æ¡£
- **[utoipa](https://github.com/juhaku/utoipa)** - OpenAPI 3.0 æ–‡æ¡£ç”Ÿæˆ
- **[validator](https://github.com/Keats/validator)** - æ•°æ®éªŒè¯å’Œåºåˆ—åŒ–
- **[serde](https://github.com/serde-rs/serde)** - JSON åºåˆ—åŒ–/ååºåˆ—åŒ–

#### å¼€å‘å·¥å…·
- **[tracing](https://github.com/tokio-rs/tracing)** - ç»“æ„åŒ–æ—¥å¿—è®°å½•
- **[color-eyre](https://github.com/eyre-rs/color-eyre)** - å½©è‰²é”™è¯¯æŠ¥å‘Š
- **[dotenvy](https://github.com/allan2/dotenvy)** - ç¯å¢ƒå˜é‡ç®¡ç†
- **[mimalloc](https://github.com/microsoft/mimalloc)** - é«˜æ€§èƒ½å†…å­˜åˆ†é…å™¨

#### ä»»åŠ¡è°ƒåº¦
- **[tokio-cron-scheduler](https://github.com/mvniekerk/tokio-cron-scheduler)** - Cron ä»»åŠ¡è°ƒåº¦
- **[chrono](https://github.com/chronotope/chrono)** - æ—¥æœŸæ—¶é—´å¤„ç†
- **[time](https://github.com/time-rs/time)** - æ—¶é—´å¤„ç†åº“

### è®¾è®¡ç†å¿µ

- **ç®€æ´é«˜æ•ˆ** - å•ä½“åº”ç”¨ï¼Œéƒ¨ç½²ç®€å•ï¼Œç»´æŠ¤æˆæœ¬ä½
- **å¼‚æ­¥ä¼˜å…ˆ** - åŸºäº Tokio çš„å…¨å¼‚æ­¥æ¶æ„ï¼Œé«˜å¹¶å‘å¤„ç†
- **ç±»å‹å®‰å…¨** - å……åˆ†åˆ©ç”¨ Rust ç±»å‹ç³»ç»Ÿï¼Œç¼–è¯‘æ—¶é”™è¯¯æ£€æŸ¥
- **æ€§èƒ½ä¼˜åŒ–** - mimalloc åˆ†é…å™¨ã€è¿æ¥æ± ã€é›¶æ‹·è´è®¾è®¡
- **ä¼˜é›…å…³é—­** - å®Œæ•´çš„ä¿¡å·å¤„ç†å’Œèµ„æºæ¸…ç†æœºåˆ¶

## ğŸ“š ç›¸å…³æ–‡æ¡£

- **[å¼€å‘æŒ‡å—](docs/development-guide.md)** - è¯¦ç»†çš„é¡¹ç›®ç»“æ„ã€å¼€å‘å‘½ä»¤å’Œé…ç½®ç®¡ç†
- **[æœåŠ¡ç”Ÿå‘½å‘¨æœŸ](docs/service-lifecycle.md)** - æ¶æ„è®¾è®¡å’Œä¼˜é›…å…³é—­æœºåˆ¶è¯¦è§£
- **[æ¶æ„æµç¨‹å›¾](docs/mermaid_final.md)** - å®Œæ•´çš„ç³»ç»Ÿæ¶æ„å¯è§†åŒ–å›¾è¡¨
- **[æŠ€æœ¯é€‰å‹ FAQ](docs/faq.md)** - ä¸ºä»€ä¹ˆé€‰æ‹©è¿™äº›æŠ€æœ¯æ ˆçš„è¯¦ç»†è¯´æ˜

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚

- **Rust**: 1.70+ (æ¨èä½¿ç”¨æœ€æ–°ç¨³å®šç‰ˆ)
- **PostgreSQL**: 13+
- **Redis**: 6+
- **Docker**: ç”¨äºæœ¬åœ°å¼€å‘ç¯å¢ƒ

### å¼€å‘ç¯å¢ƒæ­å»º

1. **å…‹éš†é¡¹ç›®**
   ```bash
   git clone <repository-url>
   cd rust-backend
   ```

2. **å¯åŠ¨ä¾èµ–æœåŠ¡**
   ```bash
   cd db_helper && docker compose up -d
   cd ..
   ```

3. **å®‰è£…æ•°æ®åº“å·¥å…·**
   ```bash
   cargo install sqlx-cli
   ```

4. **åˆå§‹åŒ–æ•°æ®åº“**
   ```bash
   sqlx database create
   sqlx migrate run
   ```

5. **é…ç½®ç¯å¢ƒå˜é‡**
   ```bash
   cp .env.example .env  # å¦‚æœæœ‰æ¨¡æ¿æ–‡ä»¶
   # ç¼–è¾‘ .env æ–‡ä»¶é…ç½®æ•°æ®åº“å’ŒRedisè¿æ¥
   ```

6. **å¯åŠ¨é¡¹ç›®**
   ```bash
   cargo run
   ```

### éªŒè¯å®‰è£…

- ğŸŒ **Web API**: http://localhost:8080
- ğŸ“– **APIæ–‡æ¡£**: http://localhost:8080/swagger-ui/
- ğŸ—„ï¸ **æ•°æ®åº“**: localhost:5432
- ğŸ“¨ **Redis**: localhost:6379

### ğŸ”— æŠ€æœ¯èµ„æº

#### æ ¸å¿ƒæ¡†æ¶
- [Axum å®˜æ–¹æ–‡æ¡£](https://docs.rs/axum/latest/axum/)
- [Tokio å®˜æ–¹æ–‡æ¡£](https://tokio.rs/docs)
- [SQLx æ–‡æ¡£](https://github.com/launchbadge/sqlx)
- [Redis æ–‡æ¡£](https://redis.io/documentation)

#### å¼€å‘å·¥å…·
- [Rust å®˜æ–¹æ–‡æ¡£](https://doc.rust-lang.org/)
- [Cargo ä½¿ç”¨æŒ‡å—](https://doc.rust-lang.org/cargo/)
- [OpenAPI è§„èŒƒ](https://swagger.io/specification/)

### ğŸ¤ è´¡çŒ®æŒ‡å—

#### å¼€å‘è§„èŒƒ
- éµå¾ª Rust å®˜æ–¹ä»£ç é£æ ¼
- ä½¿ç”¨ `cargo fmt` æ ¼å¼åŒ–ä»£ç 
- ç¼–å†™å•å…ƒæµ‹è¯•å’Œé›†æˆæµ‹è¯•
- æ›´æ–°ç›¸å…³æ–‡æ¡£

#### æäº¤è§„èŒƒ
- ä½¿ç”¨æ¸…æ™°çš„æäº¤ä¿¡æ¯
- åŒ…å«ç›¸å…³çš„ issue ç¼–å·
- éµå¾ª [Conventional Commits](https://www.conventionalcommits.org/) è§„èŒƒ

### ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ï¼Œè¯¦æƒ…è¯·å‚è§ [LICENSE](LICENSE) æ–‡ä»¶ã€‚

---

<div align="center">

**ğŸš€ ç”¨ Rust æ„å»ºç°ä»£åŒ–åç«¯æœåŠ¡**

[â­ Star](../../stargazers) | [ğŸ› æŠ¥å‘Šé—®é¢˜](../../issues) | [ğŸ’¡ åŠŸèƒ½è¯·æ±‚](../../issues/new)

Made with â¤ï¸ by [AsiaZhang](https://github.com/asiazhang)

</div>
